<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Title: Practices for Test Environments</title>

    <link
      rel="stylesheet"
      href="../../node_modules/reveal.js/dist/reveal.css"
    />
    <link
      rel="stylesheet"
      href="../../node_modules/reveal.js/dist/theme/white.css"
    />
    <style>
      /* Hide default bullet point */
      .bold-blue {
        font-weight: bold;
        color: #8ddddf;
      }

      ul li {
        list-style-type: none;
      }

      .bullet-arrow {
        list-style-type: none;
        padding-left: 1em;
      }

      .bullet-arrow > li {
        position: relative;
      }

      .bullet-arrow > li > span {
        display: inline-block;
        vertical-align: middle;
      }

      .bullet-arrow > li > img {
        vertical-align: middle;
        margin-left: 10px;
      }

      .bullet-arrow li::before {
        content: "➡";
        color: #8ddddf;
        margin-right: 10px;
        font-size: 0.6em;
      }

      .bullet-dots li::before {
        content: "...";
        color: #8ddddf;
        margin-right: 10px;
        font-size: 0.6em;
      }
    </style>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section
          data-markdown
          section
          data-transition="fade"
          data-background-gradient="linear-gradient(to bottom, #FFFFFF, #FFFFFF)"
          <!--
          data-background-gradient="linear-gradient(to bottom, #EA8324, #FFFFFF)"
          --
        >
          >
          <textarea data-template>
            # Practices for Test Environments
            ---
            ## Test Environments

            - mitigate <span class="bold-blue">risk</span>
            - provide a safe place to <span class="bold-blue">experiment</span>
            
            <!-- .element: class="bullet-dots" -->

            ---
            ## Test Environments
          	
            - too many reinforce/require <span class="bold-blue">slow</span> & <span class="bold-blue">inefficient processes</span>
            - too few artificially block and create <span class="bold-blue">confusion</span> and <span class="bold-blue">traffic jams</span>
            - <span class="bold-blue">poor management</span> injects both (along with other problems)

            <!-- .element: class="bullet-dots" -->
	          
            ---
            ## Let’s reboot

            - throw out old assumptions and history
            - what are our <span class="bold-blue">foundational principles</span>?
            
            <!-- .element: class="bullet-arrow" -->

            ---
            ## System Architecture

            <ul class="bullet-arrow">
              <li>
                <span>Backend</span>
                <img src="../media/api.png" alt="Alt Text" width="25" style="width: 25px;">
              </li>
              <li>Data Warehouse</li>
              <li>
                <span>Clients</span>
                <ul class="bullet-arrow">
                  <li>
                    <img src="../media/web.png" alt="Alt Text" width="25" style="width: 25px;">
                  </li>
                  <li>
                    <img src="../media/ios.png" alt="Alt Text" width="25" style="width: 25px;">
                  </li>
                  <li>
                    <img src="../media/android.png" alt="Alt Text" width="25" style="width: 25px;">
                  </li>
                </ul>
              </li>
            </ul>
                        


            ---
            ## Foundational Principles

            - all teams (client + backend) should be able to validate changes prior to launching in production
            - all teams (client + backend) should be able to safely debug production issues
            - mainline codebases should be kept clean from untested changes (as best as possible)
            - coordination between teams, branches, and features should be minimized (but will undoubtedly happen)
            - deployments should be co-owned between ENG/Ops, and must be delivered in under 10 minutes
            - clients "require" the backend
            - backend does not "need" a client
            
            ---
            # PROPOSAL

            ---
            ## Containers
            
            - What is a container?
                - software that packages code and its dependencies so the application runs quickly and reliably across computing environments
            - what does that mean?
	              - Theoretically a container can be spun up anywhere at anytime with the same code/dependencies as Production/STG/QA - allowing us to test changes independently in isolation
            
            ---
            ## Backend Containers
            - users: Dev, QA
            - container for testing all non-calling/non-texting features
            - *any* branch can be deployed here, by a Dev or QA
            - in practice, for change verification, it will mostly be feature branches
            - deploy on-demand
            - work outstanding
                - Backend team to complete investigation into supporting containerization
                - publish documentation to set up & use a local container
            
            ---
            ## QA Environment
            - users: Dev, QA
            - for testing calling/texting features
            - feature branches can go here
            - *any* branch can go here
            - deploys must be coordinated / scheduled. 1 hour mininimum, 4 hour maximum
            
            ---
            ## STG Env
            - users: Dev, QA, Product, Support
            - prod debugging
            - mainline code branch or production version only
            - final release validation
            - default for client integration testing
            - automated e2e tests
            - Monitor for issues and performance similar to production
            - Logging and reporting systems to track metrics, feature performance, etc as production
            - Set up automated alerts for critical incidents similar to production
            
            ---
            ## Automation
            - users: Dev, QA
            - backend
                - execute integration tests against backend containers (parallelized?)
            - client
                - stubbed integration with backend for daily/regular runs
                - full e2e nightly against STG

            ---
            ## Test Data
            - Invest in automation of weekly full production data snapshots (masked)
            - Both STG and QA get refreshes every Sunday night
            - Containers need a small reference dataset, otherwise managed on-demand by requirements of the feature

            ---
            ## Key Takeaways & Conclusions
            ### Parallel tracks
              1. scheduled testing in QA
              2. complete backend containerization work
              3. prod data snapshots
            ---
          </textarea>
        </section>
      </div>
    </div>

    <script src="../../node_modules/reveal.js/dist/reveal.js"></script>
    <script src="../../node_modules/reveal.js/plugin/markdown/markdown.js"></script>
    <script>
      Reveal.initialize({
        plugins: [RevealMarkdown],
      });
    </script>
  </body>
</html>
